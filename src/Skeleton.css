:root {
    --skeletonify-base-color: #f0f0f0;
    --skeletonify-highlight-color: #fcfcfc;
    --skeletonify-duration: 1.5s;
    --skeletonify-border-radius: 4px;
    --skeletonify-card-bg: #fafafa;
}

.skeletonify-loading {
    user-select: none;
}

/* Prevent clicking on interactive elements inside skeletons */
.skeletonify-loading :where(a, button, input, select, textarea, [role="button"], [tabindex]) {
    pointer-events: none !important;
}

/* Wrapper is purely functional and should not disturb layout */
.skeletonify-wrapper.skeletonify-loading {
    display: contents;
}

/* Container Mode: The wrapper itself becomes the skeleton, hiding children */
.skeletonify-container-mode.skeletonify-loading {
    background-color: var(--skeletonify-base-color) !important;
    border: none !important;
    color: transparent !important;
}

.skeletonify-container-mode.skeletonify-loading * {
    visibility: hidden !important;
}

/* 1. Reset: Hide default content visuals but KEEP layout and border-radius */
.skeletonify-loading *:not(.not-skeleton) {
    color: transparent !important;
    border-color: transparent !important;
    background-color: transparent !important;
    background-image: none !important;
    box-shadow: none !important;
}

/* 2. Shimmer Blocks: Targeted elements get the skeleton color */
/* We target specific semantic elements. We avoid broad 'div' unless it's a known utility class or empty placeholder */
.skeletonify-loading :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, div:empty, span:empty, .sk-circle, .sk-rect, .sk-pill, .sk-block):not(.not-skeleton) {
    background-color: var(--skeletonify-base-color) !important;
    border-radius: var(--skeletonify-border-radius);
    min-height: 0.8em;
    min-width: 20px;
    display: inline-block;
}

/* Explicit Shape Utilities */
.skeletonify-loading .sk-circle {
    border-radius: 50% !important;
}

.skeletonify-loading .sk-rect {
    border-radius: 4px !important;
}

.skeletonify-loading .sk-pill {
    border-radius: 9999px !important;
}

/* Support for random widths on specific text blocks */
.skeletonify-random-widths :where(p, li, .line, h1, h2, h3, h4, h5, h6) {
    width: var(--skeletonify-random-width, 100%) !important;
    max-width: 100%;
}

/* Block-level placeholders that should take full width to prevent layout collapse */
.skeletonify-loading :where(h1, h2, h3, h4, h5, h6, p, .poster-placeholder, .thumbnail, .movie-title, .movie-rating) {
    display: block;
    width: 100%;
    min-height: 1.2em;
}

/* Fallback for common utility classes if inherit is tricky */
.skeletonify-loading .avatar,
.skeletonify-loading .icon {
    border-radius: 50% !important;
}

/* 3. Media elements */
.skeletonify-loading :where(img, video, svg, canvas, iframe) {
    visibility: hidden !important;
    background-color: var(--skeletonify-base-color) !important;
}

/* 4. Animation Variants - Only onto blocks */
.skeletonify-animate.skeletonify-variant-shimmer :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, .poster-placeholder, .thumbnail, div:empty, span:empty, img, svg, .movie-title, .movie-rating, .sk-circle, .sk-rect, .sk-pill),
.skeletonify-animate.skeletonify-variant-wave :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, .poster-placeholder, .thumbnail, div:empty, span:empty, img, svg, .movie-title, .movie-rating, .sk-circle, .sk-rect, .sk-pill) {
    background-size: 200% 100% !important;
    background-repeat: no-repeat !important;
}

/* Also animate the container itself if in container mode */
.skeletonify-animate.skeletonify-container-mode.skeletonify-variant-shimmer,
.skeletonify-animate.skeletonify-container-mode.skeletonify-variant-wave {
    background-size: 200% 100% !important;
    background-repeat: no-repeat !important;
}

/* Variant: SHIMMER */
.skeletonify-animate.skeletonify-variant-shimmer :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, .poster-placeholder, .thumbnail, div:empty, span:empty, img, svg, .movie-title, .movie-rating, .sk-circle, .sk-rect, .sk-pill),
.skeletonify-animate.skeletonify-container-mode.skeletonify-variant-shimmer {
    background-image: linear-gradient(90deg,
            var(--skeletonify-base-color) 25%,
            var(--skeletonify-highlight-color) 40%,
            var(--skeletonify-base-color) 55%) !important;
    animation: skeletonify-shimmer var(--skeletonify-duration) infinite linear !important;
}

/* Variant: WAVE */
.skeletonify-animate.skeletonify-variant-wave :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, .poster-placeholder, .thumbnail, div:empty, span:empty, img, svg, .movie-title, .movie-rating, .sk-circle, .sk-rect, .sk-pill),
.skeletonify-animate.skeletonify-container-mode.skeletonify-variant-wave {
    background-image: linear-gradient(110deg,
            var(--skeletonify-base-color) 40%,
            var(--skeletonify-highlight-color) 50%,
            var(--skeletonify-base-color) 60%) !important;
    animation: skeletonify-wave var(--skeletonify-duration) infinite linear !important;
}

/* Variant: PULSE */
.skeletonify-animate.skeletonify-variant-pulse :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, .poster-placeholder, .thumbnail, div:empty, span:empty, img, svg, .movie-title, .movie-rating, .sk-circle, .sk-rect, .sk-pill),
.skeletonify-animate.skeletonify-container-mode.skeletonify-variant-pulse {
    animation: skeletonify-pulse var(--skeletonify-duration) infinite ease-in-out !important;
}

/* Variant: BLINK */
.skeletonify-animate.skeletonify-variant-blink :where(h1, h2, h3, h4, h5, h6, p, span, label, li, b, strong, i, u, em, button, input, textarea, .avatar, .icon, .line, .poster-placeholder, .thumbnail, div:empty, span:empty, img, svg, .movie-title, .movie-rating, .sk-circle, .sk-rect, .sk-pill),
.skeletonify-animate.skeletonify-container-mode.skeletonify-variant-blink {
    animation: skeletonify-blink var(--skeletonify-duration) infinite ease-in-out !important;
}

/* 5. Keyframes */

@keyframes skeletonify-shimmer {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

@keyframes skeletonify-wave {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

@keyframes skeletonify-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.6;
    }
}

@keyframes skeletonify-blink {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.1;
    }
}

/* Manual circle force - applies to the element itself and all descendants */
.skeletonify-circle,
.skeletonify-circle *:not(.not-skeleton) {
    border-radius: 50% !important;
}

/* Manual exclusion utility */
.skeletonify-loading .not-skeleton {
    visibility: visible !important;
    opacity: 1 !important;
}